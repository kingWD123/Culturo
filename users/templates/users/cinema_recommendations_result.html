{% extends "users/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/cinema.css' %}">
<style>
    body, .container {
        background: #181818 !important;
        color: #fff !important;
    }
    .reco-card {
        background: #222 !important;
        border-radius: 18px !important;
        box-shadow: 0 4px 24px rgba(0,0,0,0.18) !important;
        padding: 1.2rem 1.2rem 3.2rem 0.7rem;
        display: flex;
        gap: 1.5rem;
        align-items: flex-start;
        margin-bottom: 2rem;
        color: #fff !important;
    }
    .reco-card img {
        width: 110px;
        height: auto;
        border-radius: 10px;
        object-fit: cover;
        box-shadow: 0 2px 8px rgba(0,0,0,0.09);
    }
    .reco-card h3 {
        margin: 0 0 0.3rem 0;
        font-size: 1.3rem;
        color: #e50914 !important;
    }
    .reco-card .desc {
        margin-bottom: 0.5rem;
        color: #b3b3b3 !important;
    }
    .reco-card .meta {
        font-size: 1rem;
        color: #b3b3b3 !important;
        margin-bottom: 0.3rem;
    }
    .section-title {
        color: #fff !important;
        text-shadow: 0 2px 8px #000;
    }
    a {
        color: #e50914 !important;
        font-weight: 600;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h1 class="section-title" style="margin-top:2rem;">üé¨ Your Movie Recommendations</h1>
    {% if qloo_url %}
    <div style="margin-bottom:2rem;">
        <a href="{{ qloo_url }}" target="_blank">üîó View recommendations on ClooAI</a>
    </div>
    {% endif %}
    {% if recommendations %}
    {% for film in recommendations %}
    <div class="reco-card">
        {% if film.image %}<img src="{{ film.image }}" alt="{{ film.name }}">{% endif %}
        <div style="flex:1;min-width:0;">
            <h3>{{ film.name }} {% if film.release_year %}<span style="color:#b3b3b3;font-size:1rem;">({{ film.release_year }})</span>{% endif %}</h3>
            {% if film.description %}<div class="desc">{{ film.description }}</div>{% endif %}
            {% if film.genres %}<div class="meta"><b>Genres:</b> {{ film.genres|join:", " }}</div>{% endif %}
            {% if film.release_country %}<div class="meta"><b>Country:</b> {{ film.release_country|join:", " if film.release_country.0 else film.release_country }}</div>{% endif %}
            {% if film.imdb_id or film.imdb_user_rating %}<div class="meta"><b>IMDB:</b> {% if film.imdb_id %}<a href="https://www.imdb.com/title/{{ film.imdb_id }}" target="_blank">{{ film.imdb_id }}</a>{% endif %} {% if film.imdb_user_rating %}‚≠ê {{ film.imdb_user_rating }} ({{ film.imdb_user_rating_count|default:0 }} votes){% endif %}</div>{% endif %}
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div style="margin-top:2rem;">No recommendations found.</div>
    {% endif %}
</div>
{% endblock %}