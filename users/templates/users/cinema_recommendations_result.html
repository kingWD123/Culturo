{% extends "users/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/cinema.css' %}">
<style>
    .reco-card {
        background: #fff3e6;
        border-radius: 14px;
        box-shadow: 0 2px 8px rgba(40, 40, 80, 0.07);
        padding: 1.2rem 1.2rem 3.2rem 0.7rem;
        display: flex;
        gap: 1.5rem;
        align-items: flex-start;
        margin-bottom: 2rem;

    }

    .reco-card img {
        width: 110px;
        height: auto;
        border-radius: 10px;
        object-fit: cover;
        box-shadow: 0 2px 8px rgba(40, 40, 80, 0.09);
    }

    .reco-card h3 {
        margin: 0 0 0.3rem 0;
        font-size: 1.3rem;
        color: #ff6b35;
    }

    .reco-card .desc {
        margin-bottom: 0.5rem;
        color: #333;
    }

    .reco-card .meta {
        font-size: 1rem;
        color: #444;
        margin-bottom: 0.3rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h1 class="section-title" style="margin-top:2rem;">üé¨ Your Movie Recommendations</h1>
    {% if qloo_url %}
    <div style="margin-bottom:2rem;">
        <a href="{{ qloo_url }}" target="_blank" style="color:#ff6b35;font-weight:600;word-break:break-all;">üîó Voir les
            recommandations sur ClooAI</a>
    </div>
    {% endif %}
    {% if recommendations %}
    {% for film in recommendations %}
    <div class="reco-card">
        {% if film.image %}<img src="{{ film.image }}" alt="{{ film.name }}">{% endif %}
        <div style="flex:1;min-width:0;">
            <h3>{{ film.name }} {% if film.release_year %}<span style="color:#888;font-size:1rem;">({{ film.release_year
                    }})</span>{% endif %}</h3>
            {% if film.description %}<div class="desc">{{ film.description }}</div>{% endif %}
            {% if film.genres %}<div class="meta"><b>Genres:</b> {{ film.genres|join:", " }}</div>{% endif %}
            {% if film.release_country %}<div class="meta"><b>Country:</b> {{ film.release_country|join:", " if
                film.release_country.0 else film.release_country }}</div>{% endif %}
            {% if film.imdb_id or film.imdb_user_rating %}<div class="meta"><b>IMDB:</b> {% if film.imdb_id %}<a
                    href="https://www.imdb.com/title/{{ film.imdb_id }}" target="_blank">{{ film.imdb_id }}</a>{% endif
                %} {% if film.imdb_user_rating %}‚≠ê {{ film.imdb_user_rating }} ({{ film.imdb_user_rating_count|default:0
                }} votes){% endif %}</div>{% endif %}
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div style="margin-top:2rem;">No recommendations found.</div>
    {% endif %}
</div>
{% endblock %}