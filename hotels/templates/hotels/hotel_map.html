{% extends "users/base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<link rel="stylesheet" href="{% static 'css/hotel_map.css' %}">

<!-- Map Container -->
<div id="map"></div>

<!-- Sidebar -->
<div id="sidebarFloat" class="sidebar-float">
    <button id="closeSidebarBtn" class="close-btn">&times;</button>
    <h2>HOTEL FILTERS</h2>
    <div class="sidebar-content">
        <p>Use the chatbot to get personalized hotel recommendations based on your preferences.</p>
    </div>
    <div class="sidebar-footer">
        <p>Powered by Culturo AI</p>
    </div>
</div>

<!-- Sidebar Toggle Button -->
<button id="openSidebarBtn" class="sidebar-toggle-btn">‚ò∞</button>

<!-- Bottom Carousel -->
<div id="bottomCarousel" class="bottom-carousel hidden">
    <button id="hideCarouselBtn" class="hide-carousel-btn">&times;</button>
    <div id="carouselTrack" class="carousel-track">
        <!-- Hotel cards will be populated here -->
    </div>
</div>

<!-- Show Carousel Button -->
<button id="showCarouselBtn" class="show-carousel-btn">üè®</button>

<!-- Chatbot -->
{% if user.is_authenticated %}
<button id="chatbot-toggle" class="chatbot-toggle" aria-label="Open Chatbot">
    <i class="fas fa-comments"></i>
</button>
<div id="hotel-chatbot" class="chatbot-container">
    <div class="chatbot-header">
        <span><i class="fas fa-robot"></i> Hotel Assistant</span>
        <button id="chatbot-close" class="chatbot-close" aria-label="Close Chatbot">&times;</button>
    </div>
    <div id="chatbot-messages" class="chatbot-messages">
        <div class="chat-bubble bot-message">
            Hello! I'm your hotel assistant. I can help you find the perfect accommodation. Where would you like to stay?
        </div>
    </div>
    <div class="chatbot-input-container">
        <form id="chatbot-form" class="chatbot-form">
            <input type="text" id="chatbot-input" class="chatbot-input" placeholder="Type your message..." autocomplete="off" required>
            <button type="submit" class="chatbot-send"><i class="fas fa-paper-plane"></i></button>
        </form>
    </div>
</div>
{% endif %}

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="{% static 'js/hotel_map.js' %}"></script>
{% endblock %}